<html>
<head>

    <link rel="icon" type="image/gif/png" href="/client/images/logo.png">
    <style>
        #content{
            position:absolute;
            text-align: center;
            top: 50%;
            left:50%;
            width: 500px;
            height: 500px;
            transform: translate(-50%, -50%);
            -o-transform: translate(-50%, -50%);
            -ms-transform: translate(-50%, -50%);
            -moz-transform: translate(-50%, -50%);
            -webkit-transform: translate(-50%, -50%);
        }
        #content>img{
            position:absolute;
            top: 10%;
            left:50%;
            transform: translate(-50%, -50%);
            -o-transform: translate(-50%, -50%);
            -ms-transform: translate(-50%, -50%);
            -moz-transform: translate(-50%, -50%);
            -webkit-transform: translate(-50%, -50%);
        }
        #sign-content{
            position:absolute;
            top: 50%;
            left:50%;
            width: 200px;
            height: 160px;
            border: solid black 1px;
            transform: translate(-50%, -50%);
            -o-transform: translate(-50%, -50%);
            -ms-transform: translate(-50%, -50%);
            -moz-transform: translate(-50%, -50%);
            -webkit-transform: translate(-50%, -50%);
        }
        #sign-content>button {
            position: absolute;
            top:1%;
            left:69%;
            cursor: hand;
        }
        #sign{
            position:absolute;
            top: 55%;
            left:50%;
            transform: translate(-50%, -50%);
            -o-transform: translate(-50%, -50%);
            -ms-transform: translate(-50%, -50%);
            -moz-transform: translate(-50%, -50%);
            -webkit-transform: translate(-50%, -50%);
        }
        #sign>input{
            height: 25px;
            margin-bottom: 10px;
            border: solid 1px #dcdcdc;
            transition: box-shadow 0.3s, border 0.3s;
        }
        #sign>input:focus{
            border: solid 1px #707070;
            box-shadow: 0 0 5px 1px #969696;
        }
    </style>
</head>
    <body>
    <div id="content">
        <img src="/client/images/logo.png" alt="supership" style="width:150px;height:150px;">
        <div id="sign-content">
            <form id="sign" action="" method="post">
                Username: <input id="username" type="text"><br>
                Password: <input id="password" type="password"><br>
                <input type="submit" hidden="true">
            </form>
            <button id="signUp">Sign Up</button>
        </div>
    </div>
    </body>
</html>

<!--<script src="https://cdn.socket.io/socket.io-1.4.5.js"></script>-->
<script src="/client/socket.io.js"></script>
<script src="/client/jquery.js"></script>
<script>
    var socket = io();//io.connect('http://localhost:2000');

    // login page

    var username = null;
    var password = null;


    $('#sign').on('submit', function (e) {
        e.preventDefault();

        username = $("#username").val();
        password = $("#password").val();

        if(!username || !password){
            alert("Please, enter username and password");
            return;
        }
        socket.emit('signInPack', {username:username, pass:password});
    });

    socket.on('signInResponse', function (data) {
      if (data.success){
          window.sessionStorage.setItem("username", username);
          window.sessionStorage.setItem("password", password);

          var params = [
              'height=' + screen.height,
              'width=' + screen.width,
              'fullscreen=yes', // only works in IE, but here for completeness
              'menubar=no',
              'toolbar=no',
              'location=no',
              'status=no'
          ].join(',');
           $("#content").html("Enjoy!");
          window.open("/client/game/game-index.html", "SuperSpace", params);
          window.close();
      } else {
          alert('Username or password didn\'t match :(');
      }
    });


    $("#signUp").on("click", function () {
        username = $("#username").val();
        password = $("#password").val();

        if(username && password){
            socket.emit('signUpPack', {username:username, pass:password});
        } else {
            alert('You should enter name and password');
        }
    });

    socket.on('signUpResponse', function (data) {
        if (data.success&& username && password){
            var params = [
                'height=' + screen.height,
                'width=' + screen.width,
                'fullscreen=yes', // only works in IE, but here for completeness
                'menubar=no',
                'toolbar=no',
                'location=no',
                'status=no'
            ].join(',');
            $("#content").html("Enjoy!");
            var w = window.open("/client/game/game-index.html", "SuperSpace", params);
            document.close();
        } else
            alert('Sorry, but this username is already exist :(');
    });





</script>